<!-- Contact Section -->
<section class="wrapper-column" id="contact">
  <div class="wrapper-content">
    <!-- Contact Section -->
    <section class="wrapper-column" id="contact">
      <div class="contact-container">
        <!-- Form Section -->
        <div class="contact-form-section">
          <div class="contact-form-wrapper">
            <div class="contact-form-header">
              <h1 class="contact-form-title">Get In Touch</h1>
              <p class="contact-form-subtitle">
                Have a question or need assistance? We're here to help you.
              </p>
            </div>

            <form id="hospitalContactForm" action="/" method="post">
              {% csrf_token %}
              <div class="contact-form-row">
                <div class="contact-form-group">
                  <label for="patientFirstName" class="contact-form-label">
                    <i class="fas fa-user"></i> First Name
                  </label>
                  <input
                    type="text"
                    id="patientFirstName"
                    name="first_name"
                    class="contact-form-input"
                    required
                  />
                  <div class="contact-error-message"></div>
                </div>
                <div class="contact-form-group">
                  <label for="patientLastName" class="contact-form-label">
                    <i class="fas fa-user"></i> Last Name
                  </label>
                  <input
                    type="text"
                    id="patientLastName"
                    name="last_name"
                    class="contact-form-input"
                    required
                  />
                  <div class="contact-error-message"></div>
                </div>
              </div>

              <div class="contact-form-group">
                <label for="patientEmail" class="contact-form-label">
                  <i class="fas fa-envelope"></i> Email Address
                </label>
                <input
                  type="email"
                  id="patientEmail"
                  name="email"
                  class="contact-form-input"
                  required
                />
                <div class="contact-error-message"></div>
              </div>

              <div class="contact-form-group">
                <label for="patientPhone" class="contact-form-label">
                  <i class="fas fa-phone"></i> Phone Number
                </label>
                <input
                  type="tel"
                  id="patientPhone"
                  name="phone"
                  class="contact-form-input"
                />
              </div>

              <div class="contact-form-group">
                <label for="patientMessage" class="contact-form-label">
                  <i class="fas fa-message"></i> Message
                </label>
                <textarea
                  id="patientMessage"
                  name="message"
                  class="contact-form-textarea"
                  required
                ></textarea>
                <div class="contact-error-message"></div>
              </div>

              <button type="submit" class="contact-submit-btn">
                <i class="fas fa-paper-plane"></i> Send Message
              </button>
            </form>
          </div>
        </div>

        <!-- Info Section -->
        <div class="contact-info-section">
          <div class="contact-floating-shape contact-shape-1"></div>
          <div class="contact-floating-shape contact-shape-2"></div>
          <div class="contact-floating-shape contact-shape-3"></div>

          <div class="contact-info-content">
            <div class="contact-company-logo">
              <i class="fas fa-hospital"></i> Health Secure Plus
            </div>

            <h2 class="contact-info-title">Your Health is Our Priority</h2>
            <p class="contact-info-description">
              We're committed to providing exceptional healthcare services.
              Reach out to us for appointments, inquiries, or any assistance you
              need.
            </p>

            <div class="contact-info-items">
              <div class="contact-info-item">
                <i class="fas fa-envelope"></i>
                <span>healthsecurepluss@gmail.com</span>
              </div>

              <div class="contact-info-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>Healthcare District, New Delhi, India</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const formInputs = document.querySelectorAll(
      ".contact-form-input, .contact-form-textarea"
    );

    formInputs.forEach((input) => {
      // check if input has value on page load
      if (input.value.trim() !== "") {
        input.classList.add("contact-has-content");
        const label = input.parentElement.querySelector(".contact-form-label");
        if (label) label.classList.add("contact-floating");
      }

      // on focus float the label
      input.addEventListener("focus", function () {
        const label = this.parentElement.querySelector(".contact-form-label");
        if (label) label.classList.add("contact-floating");
      });

      // on blur check if input has content
      input.addEventListener("blur", function () {
        const label = this.parentElement.querySelector(".contact-form-label");
        if (this.value.trim() === "") {
          if (label) label.classList.remove("contact-floating");
          this.classList.remove("contact-has-content");
        } else {
          this.classList.add("contact-has-content");
        }
      });

      // on input add has-content class
      input.addEventListener("input", function () {
        const label = this.parentElement.querySelector(".contact-form-label");
        if (this.value.trim() !== "") {
          this.classList.add("contact-has-content");
          if (label) label.classList.add("contact-floating");
        }
      });
    });

    // form submission
    const contactForm = document.getElementById("hospitalContactForm");
    if (contactForm) {
      contactForm.addEventListener("submit", function (e) {
        e.preventDefault();

        let isValid = true;

        // validate each field
        formInputs.forEach((input) => {
          const formGroup = input.parentElement;
          const errorMsg = formGroup.querySelector(".contact-error-message");

          if (input.hasAttribute("required") && input.value.trim() === "") {
            formGroup.classList.add("error");
            if (errorMsg) errorMsg.textContent = "This field is required";
            isValid = false;
          } else {
            formGroup.classList.remove("error");
          }

          // email validation
          if (input.type === "email" && input.value.trim() !== "") {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(input.value)) {
              formGroup.classList.add("error");
              if (errorMsg) errorMsg.textContent = "Please enter a valid email";
              isValid = false;
            }
          }
        });

        if (isValid) {
          console.log(formInputs);
          const payload = {};
          formInputs.forEach((input) => {
            payload[input.name] = input.value;
          });
          console.log(payload);

          // fetch api here

          alert("Thank you for your message! We will get back to you soon.");
          contactForm.reset();
          formInputs.forEach((input) => {
            input.classList.remove("contact-has-content", "contact-valid");
            const label = input.parentElement.querySelector(
              ".contact-form-label"
            );
            if (label) label.classList.remove("contact-floating");
          });
        }
      });
    }
  });
</script>
